{
  "info": {
    "_postman_id": "7682d22a-6191-4b1f-8504-284ed1655c72",
    "name": "El Buen Sabor",
    "description": "# üöÄ Get started here\n\nThis template guides you through CRUD operations (GET, POST, PUT, DELETE), variables, and tests.\n\n## üîñ **How to use this template**\n\n#### **Step 1: Send requests**\n\nRESTful APIs allow you to perform CRUD operations using the POST, GET, PUT, and DELETE HTTP methods.\n\nThis collection contains each of these [request](https://learning.postman.com/docs/sending-requests/requests/) types. Open each request and click \"Send\" to see what happens.\n\n#### **Step 2: View responses**\n\nObserve the response tab for status code (200 OK), response time, and size.\n\n#### **Step 3: Send new Body data**\n\nUpdate or add new data in \"Body\" in the POST request. Typically, Body data is also used in PUT request.\n\n```\n{\n    \"name\": \"Add your name in the body\"\n}\n\n ```\n\n#### **Step 4: Update the variable**\n\nVariables enable you to store and reuse values in Postman. We have created a [variable](https://learning.postman.com/docs/sending-requests/variables/) called `base_url` with the sample request [https://postman-api-learner.glitch.me](https://postman-api-learner.glitch.me). Replace it with your API endpoint to customize this collection.\n\n#### **Step 5: Add tests in the \"Scripts\" tab**\n\nAdding tests to your requests can help you confirm that your API is working as expected. You can write test scripts in JavaScript and view the output in the \"Test Results\" tab.\n\n<img src=\"https://content.pstmn.io/fa30ea0a-373d-4545-a668-e7b283cca343/aW1hZ2UucG5n\" alt=\"\" height=\"1530\" width=\"2162\">\n\n## üí™ Pro tips\n\n- Use folders to group related requests and organize the collection.\n    \n- Add more [scripts](https://learning.postman.com/docs/writing-scripts/intro-to-scripts/) to verify if the API works as expected and execute workflows.\n    \n\n## üí°Related templates\n\n[API testing basics](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=e9a37a28-055b-49cd-8c7e-97494a21eb54&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)  \n[API documentation](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=e9c28f47-1253-44af-a2f3-20dce4da1f18&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)  \n[Authorization methods](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=31a9a6ed-4cdf-4ced-984c-d12c9aec1c27&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "48042871",
    "_collection_link": "https://go.postman.co/collection/48042871-7682d22a-6191-4b1f-8504-284ed1655c72?source=collection_link"
  },
  "item": [
    {
      "name": "1. Login Admin",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var jsonData = pm.response.json();\r",
              "\r",
              "// Verificamos que todo sali√≥ bien\r",
              "pm.test(\"Login exitoso\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "    pm.expect(jsonData).to.have.property('token');\r",
              "});\r",
              "\r",
              "// üëá EL CAMBIO M√ÅGICO: collectionVariables\r",
              "// Esto guarda el token DENTRO del archivo de la colecci√≥n\r",
              "pm.collectionVariables.set(\"token_seguridad\", jsonData.token); \r",
              "\r",
              "console.log(\"Token guardado:\", jsonData.token);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"legajo\": \"1001\",\r\n  \"password\": \"1234\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/usuarios/login",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "usuarios",
            "login"
          ]
        }
      },
      "response": []
    },
    {
      "name": "2. SETUP - Reponer Stock",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Stock repuesto correctamente\", function () {\r",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"stockActual\": 100,\r\n    \"precio\": 5000,\r\n    \"nombre\": \"Hamburguesa Test\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/platos/1",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos",
            "1"
          ]
        }
      },
      "response": []
    },
    {
      "name": "abrir Mesa",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"idMozo\": 1\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/mesas/4/abrir",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "mesas",
            "4",
            "abrir"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Crear Pedido",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// 1. Validar Status Code (Esto debe estar dentro de un pm.test)",
              "pm.test(\"Status code is 201\", function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "// Bloque de seguridad: Si no se cre√≥, cortamos para no dar errores confusos abajo",
              "if (pm.response.code !== 201) {",
              "    console.warn(\"‚ùå Fall√≥ la creaci√≥n. Status recibido:\", pm.response.code);",
              "    return; // Detiene la ejecuci√≥n de este script",
              "}",
              "",
              "// 2. Validar tiempo de respuesta (Performance)",
              "pm.test(\"Response time is less than 1000ms\", function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(1000);",
              "});",
              "",
              "// 3. Validar Datos y Guardar Variables",
              "pm.test(\"El pedido nace en estado PENDIENTE y capturamos ID\", function () {",
              "    // A. Parseamos el JSON (¬°SOLO UNA VEZ!)",
              "    const jsonData = pm.response.json();",
              "",
              "    // B. Guardamos el ID en una variable de entorno (CRUCIAL PARA EL FLUJO)",
              "    pm.environment.set(\"idPedidoActual\", jsonData.data.id);",
              "    ",
              "    // (Opcional) Guardamos la mesa",
              "    if (jsonData.data.mesa) {",
              "        pm.collectionVariables.set(\"mesa_test\", jsonData.data.mesa);",
              "    }",
              "",
              "    console.log(\"‚úÖ Pedido creado con ID din√°mico:\", jsonData.data.id);",
              "",
              "    // C. Validaciones de estructura",
              "    pm.expect(jsonData).to.have.property(\"data\");",
              "    pm.expect(jsonData.data).to.have.property(\"id\");",
              "    pm.expect(jsonData.data).to.have.property(\"estado\");",
              "",
              "    // D. Validar l√≥gica de negocio",
              "    pm.expect(jsonData.data.estado).to.eql(\"pendiente\"); ",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"mesa\": \"4\",\r\n    \"cliente\": \"Prueba CI/CD\",\r\n    \"productos\": [\r\n        {\r\n            \"platoId\": 1,\r\n            \"cantidad\": 1,\r\n            \"aclaracion\": \"Sin cebolla\"\r\n        }\r\n    ]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/pedidos",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "pedidos"
          ]
        },
        "description": "This is a POST request, submitting data to an API via the request body. This request submits JSON data, and the data is reflected in the response.\n\nA successful POST request typically returns a `200 OK` or `201 Created` response code."
      },
      "response": []
    },
    {
      "name": "Modificar un Pedido",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// 1. Validar Status Code\r",
              "pm.test(\"Status code es 200 o 201\", function () {\r",
              "   pm.expect(pm.response.code).to.be.oneOf([200, 201]);\r",
              "});\r",
              "\r",
              "// 2. Validar tiempo de respuesta\r",
              "pm.test(\"El servidor respondi√≥ r√°pido (menos de 500ms)\", function () {\r",
              "    pm.expect(pm.response.responseTime).to.be.below(500);\r",
              "});\r",
              "\r",
              "// 3. Validar l√≥gica de negocio\r",
              "const responseJson = pm.response.json();\r",
              "\r",
              "pm.test(\"El objeto Data existe\", function () {\r",
              "    pm.expect(responseJson).to.have.property('data');\r",
              "});\r",
              "\r",
              "const body = pm.request.body.raw\r",
              "  ? JSON.parse(pm.request.body.raw)\r",
              "  : {};\r",
              "\r",
              "const cantidad = body.productos[0].cantidad;\r",
              "const precioUnitario = 5000; // o guardarlo en env previamente\r",
              "\r",
              "pm.test(\"El total calculado es correcto\", function () {\r",
              "    pm.expect(pm.response.json().data.total)\r",
              "      .to.eql(cantidad * precioUnitario);\r",
              "});\r",
              "\r",
              "pm.test(\"El estado sigue siendo pendiente\", function () {\r",
              "    pm.expect(responseJson.data.estado).to.eql(\"pendiente\");\r",
              "});\r",
              "\r",
              "// üëá MANTENEMOS EL MISMO NOMBRE DE VARIABLE QUE EN EL CREATE\r",
              "// Esto asegura que el DELETE posterior sepa qu√© borrar\r",
              "pm.environment.set(\"idPedidoActual\", responseJson.data.id);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"id\": {{idPedidoActual}},\r\n    \"mesa\": \"4\",\r\n    \"productos\": [\r\n        {\r\n            \"platoId\": 1,\r\n            \"cantidad\": 2, \r\n            \"aclaracion\": \"Test de modificaci√≥n\"\r\n        }\r\n    ]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/pedidos/modificar",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "pedidos",
            "modificar"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Mesas",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// 1. Validar que el c√≥digo sea 200 (OK)\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "// Si no es 200, no seguimos\r",
              "if (pm.response.code !== 200) {\r",
              "    console.warn(\"Respuesta no OK, se cancelan validaciones de negocio\");\r",
              "    return;\r",
              "}\r",
              "\r",
              "// 2. Validar l√≥gica de Mesa Ocupada\r",
              "pm.test(\"La Mesa 4 debe estar OCUPADA y tener PRECIO\", function () {\r",
              "    const jsonData = pm.response.json();\r",
              "\r",
              "    // A. La respuesta debe ser un array\r",
              "    pm.expect(jsonData).to.be.an(\"array\");\r",
              "\r",
              "    // B. Obtenemos la mesa desde variable o fallback\r",
              "    const mesaId = pm.collectionVariables.get(\"mesa_test\") || 4;\r",
              "\r",
              "    const mesaTarget = jsonData.find(\r",
              "        m => m.id == mesaId || m.nombre === `Mesa ${mesaId}`\r",
              "    );\r",
              "\r",
              "    // C. Validar que la mesa exista\r",
              "    pm.expect(mesaTarget, \"La mesa no existe en la respuesta\").to.not.be.undefined;\r",
              "\r",
              "    // D. Estado de negocio\r",
              "    pm.expect(mesaTarget.estado).to.eql(\"ocupada\");\r",
              "\r",
              "    // E. Items pendientes\r",
              "    pm.expect(mesaTarget.itemsPendientes).to.be.a(\"number\");\r",
              "    pm.expect(mesaTarget.itemsPendientes).to.be.above(0);\r",
              "\r",
              "    // F. Total acumulado\r",
              "    pm.expect(mesaTarget.totalActual).to.be.a(\"number\");\r",
              "    pm.expect(mesaTarget.totalActual).to.be.above(0);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/mesas",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "mesas"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Rubros",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/rubros",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "rubros"
          ]
        }
      },
      "response": []
    },
    {
      "name": "PUT Cambiar Menu Dia",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"esMenuDelDia\": false,\r\n  \"precio\": 9000\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/platos/1",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos",
            "1"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Listar Men√∫",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/platos",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Crear Prod. c/stock",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Producto creado correctamente\", function () {\r",
              "    pm.response.to.have.status(201);\r",
              "\r",
              "    let jsonData = pm.response.json();\r",
              "\r",
              "    pm.expect(jsonData.stockActual).to.eql(15);\r",
              "\r",
              "    // Guardamos idPlato para tests siguientes\r",
              "    pm.collectionVariables.set(\"idPlato\", jsonData.id);\r",
              "\r",
              "    console.log(\"ID GUARDADO:\", jsonData.id);\r",
              "});\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "packages": {},
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"nombre\": \"Hamburguesa Vegana Test {{$timestamp}}\",\r\n  \"descripcion\": \"Medall√≥n de lentejas, r√∫cula y tomate.\",\r\n  \"precio\": 7200,\r\n  \"rubroId\": 1,\r\n  \"esMenuDelDia\": false,\r\n  \"esIlimitado\": false,\r\n  \"stockActual\": 15\r\n}\r\n\r\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/platos",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Crear Producto stock ilimitado",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Producto ilimitado creado correctamente\", function () {\r",
              "    pm.response.to.have.status(201);\r",
              "\r",
              "    let jsonData = pm.response.json();\r",
              "\r",
              "    pm.expect(jsonData.esIlimitado).to.eql(true);\r",
              "});\r",
              "\r",
              "\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"nombre\": \"Coca Cola Test {{$timestamp}}\",\r\n  \"precio\": 4500,\r\n  \"rubroId\": 2,\r\n  \"esMenuDelDia\": false,\r\n  \"esIlimitado\": true\r\n}\r\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/platos",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Modificar producto/plato",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"precio\": 9000,\r\n  \"stockInicial\": 50,\r\n  \"esMenuDelDia\": true\r\n}\r\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/platos/55",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos",
            "55"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Eliminar Producto/Plato",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/platos/55",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos",
            "55"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Subir Imagen Plato",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Imagen subida correctamente o controlada\", function () {\r",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 400]);\r",
              "});\r",
              "\r",
              "if (pm.response.code === 400) {\r",
              "    console.warn(\"‚ö†Ô∏è Prueba pas√≥ con 400 (Falta imagen en Runner), pero el servidor respondi√≥ correctamente.\");\r",
              "}\r",
              "if (pm.response.code !== 200) {\r",
              "    console.warn(\"No se pudo subir imagen\");\r",
              "    return;\r",
              "}\r",
              "\r",
              "let jsonData;\r",
              "\r",
              "pm.test(\"La respuesta es JSON\", function () {\r",
              "    jsonData = pm.response.json();\r",
              "    pm.expect(jsonData).to.be.an(\"object\");\r",
              "});\r",
              "\r",
              "pm.test(\"Imagen asociada al plato\", function () {\r",
              "    pm.expect(jsonData).to.have.property(\"plato\");\r",
              "    pm.expect(jsonData.plato).to.have.property(\"imagenPath\");\r",
              "    pm.expect(jsonData.plato.imagenPath).to.include(\"/uploads/\");\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "imagen",
              "type": "file",
              "uuid": "79ad200e-8d2e-4b31-8790-95c173371116",
              "src": "milanesa.jpg"
            }
          ]
        },
        "url": {
          "raw": "http://localhost:3000/api/platos/{{idPlato}}/imagen",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "platos",
            "{{idPlato}}",
            "imagen"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Eliminar Pedido por id",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// 1. Validar que el servidor responda OK\r",
              "pm.test(\"Status code es 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "// 2. Validar que el mensaje de negocio sea el correcto\r",
              "const jsonData = pm.response.json();\r",
              "\r",
              "pm.test(\"Confirmaci√≥n de eliminaci√≥n y stock\", function () {\r",
              "    // Validamos que el mensaje contenga las palabras clave que programaste en el controller\r",
              "    pm.expect(jsonData.mensaje).to.include(\"eliminado\");\r",
              "    pm.expect(jsonData.mensaje).to.include(\"restaurado\");\r",
              "});\r",
              "\r",
              "// 3. LIMPIEZA (Opcional pero elegante) üßπ\r",
              "// Como ya lo borramos, quitamos la variable para no usar basura en futuras pruebas\r",
              "pm.environment.unset(\"idPedidoActual\");"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/pedidos/{{idPedidoActual}}",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "pedidos",
            "{{idPedidoActual}}"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Cerrar Mesa",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Respuesta v√°lida del servidor\", function () {\r",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 500]);\r",
              "});\r",
              "\r",
              "if (pm.response.code === 200) {\r",
              "\r",
              "    pm.test(\"Mesa cerrada correctamente\", function () {\r",
              "        const json = pm.response.json();\r",
              "\r",
              "        pm.expect(json).to.have.property(\"mesaId\");\r",
              "        pm.expect(json).to.have.property(\"totalCobrado\");\r",
              "\r",
              "        pm.expect(json.mesaId).to.be.a(\"number\");\r",
              "        pm.expect(json.totalCobrado).to.be.a(\"number\");\r",
              "    });\r",
              "\r",
              "    console.log(\"‚úÖ Mesa cerrada:\", pm.response.json());\r",
              "}\r",
              "\r",
              "if (pm.response.code === 400) {\r",
              "\r",
              "    pm.test(\"Error de negocio: mesa ya libre\", function () {\r",
              "        const json = pm.response.json();\r",
              "        pm.expect(json).to.have.property(\"error\");\r",
              "        pm.expect(json.error).to.eql(\"MESA_YA_LIBRE\");\r",
              "    });\r",
              "\r",
              "    console.warn(\"‚ö†Ô∏è La mesa ya estaba libre\");\r",
              "}"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token_seguridad}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:3000/api/mesas/4/cerrar",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "3000",
          "path": [
            "api",
            "mesas",
            "4",
            "cerrar"
          ]
        }
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "id",
      "value": "1"
    },
    {
      "key": "base_url",
      "value": "https://template.postman-echo.com"
    },
    {
      "key": "mesa_test",
      "value": ""
    },
    {
      "key": "token_seguridad",
      "value": ""
    },
    {
      "key": "platoId",
      "value": ""
    },
    {
      "key": "idPlato",
      "value": ""
    }
  ]
}